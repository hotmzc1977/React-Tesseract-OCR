(this["webpackJsonpreact-tesseract-ocr"]=this["webpackJsonpreact-tesseract-ocr"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),i=n.n(a),o=n(13),u=n(18),s=n(8),l=n(186),b=n(35),f=n(81),d=(n(109),n(190)),h=n(191),j=n(192),p=n(193),O=n(194),x=n(188),v=n(83),g=n.n(v),w=n(89),m=n.n(w),k=n(90),y=n.n(k),S=n(91),z=n.n(S),C=n(87),R=n.n(C),H=n(86),W=n.n(H),E=n(88),I=n.n(E),T=n(2);function M(e){var t,n,c,a,i,l,v,w=Object(r.useState)(null!==(t=e.size)&&void 0!==t?t:{width:.95*window.screen.width,height:.75*window.screen.height}),k=Object(s.a)(w,2),S=k[0],C=k[1],H=Object(r.useState)(null!==(n=e.language)&&void 0!==n?n:"eng"),E=Object(s.a)(H,1)[0],M=Object(r.useState)(),L=Object(s.a)(M,2),B=L[0],P=L[1],q=Object(r.useState)(),A=Object(s.a)(q,2),D=A[0],U=A[1],J=Object(r.useState)((function(){return e.videcropHeightRatio?e.videcropHeightRatio>1?1:e.videcropHeightRatio:.2})),Z=Object(s.a)(J,2),F=Z[0],N=(Z[1],Object(r.useState)()),G=Object(s.a)(N,2),K=G[0],Q=G[1],V=Object(r.useState)(),X=Object(s.a)(V,2),Y=X[0],$=X[1],_=Object(r.useState)(1),ee=Object(s.a)(_,2),te=ee[0],ne=ee[1],re=Object(r.useState)(),ce=Object(s.a)(re,2),ae=ce[0],ie=ce[1],oe=Object(r.useState)([]),ue=Object(s.a)(oe,2),se=(ue[0],ue[1],Object(r.useRef)(null)),le=Object(r.useState)(),be=Object(s.a)(le,2),fe=be[0],de=be[1],he=Object(r.useState)(),je=Object(s.a)(he,2),pe=je[0],Oe=je[1],xe=Object(r.useState)(),ve=Object(s.a)(xe,2),ge=ve[0],we=ve[1],me=Object(r.useState)(),ke=Object(s.a)(me,2),ye=ke[0],Se=ke[1],ze=Object(r.useState)(),Ce=Object(s.a)(ze,2),Re=(Ce[0],Ce[1]),He=Object(r.useState)(),We=Object(s.a)(He,2),Ee=We[0],Ie=We[1],Te=Object(r.useState)(1),Me=Object(s.a)(Te,2),Le=Me[0],Be=Me[1],Pe=Object(r.useState)(1),qe=Object(s.a)(Pe,2),Ae=qe[0],De=qe[1],Ue=Object(r.useState)("camera"),Je=Object(s.a)(Ue,2),Ze=Je[0],Fe=Je[1],Ne=Object(r.useState)(null!==(c=e.resultMode)&&void 0!==c?c:"line"),Ge=Object(s.a)(Ne,2),Ke=Ge[0],Qe=(Ge[1],Object(r.useState)(0)),Ve=Object(s.a)(Qe,2),Xe=Ve[0],Ye=Ve[1],$e=Object(r.useState)(""),_e=Object(s.a)($e,2),et=_e[0],tt=_e[1],nt=Object(r.useState)(null!==(a=e.confidence)&&void 0!==a?a:20),rt=Object(s.a)(nt,1)[0],ct=Object(r.useRef)(null),at=Object(r.useState)(!1),it=Object(s.a)(at,2),ot=it[0],ut=it[1],st=Object(r.useRef)(!1),lt=Object(r.useRef)(null),bt=Object(r.useRef)(null),ft=Object(r.useRef)(),dt=Object(r.useRef)(),ht=Object(r.useRef)(null);Object(r.useEffect)((function(){if(K&&Y){var e=K.height*(1-F)/2;0===K.left&&P({top:K.top,left:K.left,width:K.width,height:e}),0===K.left&&U({top:K.height-e,left:K.left,width:K.width,height:e}),ie({top:Y.height*(1-F)/2,left:0,width:Y.width,height:Y.height*F})}}),[K,Y,te,F]);var jt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(e){return n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n,r,c,a,i,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct.current&&bt.current){e.next=2;break}return e.abrupt("return");case 2:if(ct.current.height=t.height,ct.current.width=t.width,n=ct.current.getContext("2d"),r=t.top,c=t.left,a=t.height,i=t.width,!n){e.next=10;break}return n.drawImage(bt.current,c,r,i,a,0,0,i,a),u=ct.current.toDataURL().toString(),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(t);case 2:if(r=e.sent,c=gt(r,S),de(t),De(c),!n){e.next=14;break}return Oe(t),Be(c),e.t0=Ie,e.next=12,kt(t);case 12:e.t1=e.sent,(0,e.t0)(e.t1);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(t);case 2:if(r=e.sent,c=gt(r,S),Oe(t),Be(c),e.t0=!n,!e.t0){e.next=13;break}return e.t1=Ie,e.next=11,kt(t);case 11:e.t2=e.sent,(0,e.t1)(e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).src=t,e.next=4,n.decode();case 4:return e.abrupt("return",{width:n.naturalWidth,height:n.naturalHeight});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(e,t){if(t.height>=e.height&&t.width>=e.width)return 1;var n=t.width/e.width,r=t.height/e.height;return n>r?r:n},wt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t,n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=null===(t=se.current)||void 0===t?void 0:t.files)&&n.length>0)){e.next=10;break}return Fe("recognize"),e.next=5,jt(n[0]);case 5:return r=e.sent,e.next=8,Ot(r,!0);case 8:e.next=11;break;case 10:de(void 0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ot){e.next=2;break}return e.abrupt("return");case 2:if("camera"!==Ze){e.next=15;break}return e.next=5,pt(Object(b.a)(Object(b.a)({},Y),{},{top:0,left:0}));case 5:return(t=e.sent)&&Ot(t),e.next=9,pt(ae);case 9:(n=e.sent)&&xt(n),Ie(void 0),Fe("recognize"),e.next=26;break;case 15:if("crop"!==Ze||!ye){e.next=19;break}ye.getCroppedCanvas().toBlob(function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,jt(t);case 3:n=e.sent,xt(n),Fe("recognize");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=26;break;case 19:if(e.t0=pe,!e.t0){e.next=26;break}return e.t1=Ie,e.next=24,kt(pe);case 24:e.t2=e.sent,(0,e.t1)(e.t2);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dt.current.recognize(t).then((function(e){return console.log("result",e),Ye(1),{success:!0,result:e}})).catch((function(e){return console.error("recognize",e),{success:!1,error:e}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){ot&&!lt.current?(lt.current=setInterval(Object(u.a)(Object(o.a)().mark((function t(){var n,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(st.current){t.next=23;break}return st.current=!0,t.next=4,pt(ae);case 4:if(!(n=t.sent)){t.next=22;break}return we(n),t.next=9,kt(n);case 9:if(r=t.sent,Ie(r),t.t0=e.onExamineResult&&r.result,!t.t0){t.next=16;break}return t.next=15,e.onExamineResult(r.result);case 15:t.t0=t.sent;case 16:if(!t.t0){t.next=22;break}return t.next=19,xt(n,!0);case 19:return Fe("recognize"),ut(!1),t.abrupt("return");case 22:setTimeout((function(){st.current=!1}),100);case 23:case"end":return t.stop()}}),t)}))),100),console.log("intervalRef.current.set",lt.current)):(console.log("intervalRef.current.clear",lt.current),st.current=!1,lt.current&&clearInterval(lt.current),lt.current=null)}),[ot]);var yt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}});case 3:t=e.sent,bt.current&&t&&(bt.current.srcObject=t,ft.current=t,bt.current.play().then((function(){$({width:bt.current.videoWidth,height:bt.current.videoHeight}),Q({top:bt.current.offsetTop,left:bt.current.offsetLeft,width:bt.current.offsetWidth,height:bt.current.offsetHeight}),ne(bt.current.offsetHeight/bt.current.videoHeight),C({height:bt.current.offsetHeight+100,width:Math.min(bt.current.offsetWidth,S.width)})}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.toString());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),St=function(){ft&&ft.current&&ft.current.getTracks().forEach((function(e){e.stop()})),console.log("video stop")};Object(r.useEffect)((function(){var e,t,n,r,c;console.log("videoSize",Y,null===(e=bt.current)||void 0===e?void 0:e.offsetHeight,null===(t=bt.current)||void 0===t?void 0:t.offsetWidth,null===(n=bt.current)||void 0===n?void 0:n.offsetTop,null===(r=bt.current)||void 0===r?void 0:r.offsetLeft,null===(c=bt.current)||void 0===c?void 0:c.offsetParent),console.log("cropArea",ae)}),[Y]);var zt,Ct=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dt.current=g.a.createWorker({logger:function(e){console.log(e),"recognizing text"===e.status?Ye(e.progress<.02?.02:e.progress):Ye(.01)}}),e.next=3,dt.current.load();case 3:return e.next=5,dt.current.loadLanguage(E);case 5:return e.next=7,dt.current.initialize(E);case 7:return e.next=9,yt();case 9:Fe("camera");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=dt.current,!e.t0){e.next=4;break}return e.next=4,dt.current.terminate();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return Ct(),function(){St(),Rt()}}),[]),Object(r.useEffect)((function(){"camera"===Ze?yt():St()}),[Ze]),Object(T.jsxs)(d.a,{style:{height:S.height,width:S.width,position:"relative",border:"1px solid Black",backgroundColor:"black",opacity:"0.8",margin:"auto"},children:[Object(T.jsx)(d.a,{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(T.jsxs)(d.a,{style:{position:"relative",overflow:"visible"},children:["camera"===Ze&&Object(T.jsx)("video",{ref:bt,autoPlay:!0,muted:!0,playsInline:!0,style:{maxWidth:S.width}}),"camera"===Ze&&B&&Object(T.jsx)(d.a,{style:Object(b.a)(Object(b.a)({},B),{},{position:"absolute",opacity:"0.6",background:"green"}),children:ge&&ot&&Object(T.jsx)("img",{src:ge,style:{maxWidth:"100%",maxHeight:"100%"}})}),"camera"===Ze&&D&&Object(T.jsx)(d.a,{style:Object(b.a)(Object(b.a)({},D),{},{position:"absolute",opacity:"0.6",background:"green"})}),"crop"===Ze&&Object(T.jsx)(f.a,{height:S.height,width:S.width,zoomTo:Ae,src:fe,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,checkOrientation:!1,onInitialized:function(e){Se(e)},guides:!0,style:{maxHeight:S.height,maxWidth:S.width}}),"recognize"===Ze&&pe&&Object(T.jsx)("img",{ref:ht,style:{zoom:Le},src:pe,alt:"cropped"}),Object(T.jsx)("canvas",{ref:ct,hidden:!0}),Ee&&Ee.result&&(!1===ot&&1===Xe||!0===ot)&&(zt="paragraph"===Ke?Ee.result.data.paragraphs:"word"===Ke?Ee.result.data.words:Ee.result.data.lines,zt.map((function(t,n){var r,c,a,i,s="".concat(Ke,"-").concat(n);return t.confidence>rt?Object(T.jsxs)("div",{id:s,onClick:Object(u.a)(Object(o.a)().mark((function n(){return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s!==et){n.next=9;break}if(tt(""),Re(""),n.t0=e.onSelect,!n.t0){n.next=7;break}return n.next=7,e.onSelect("");case 7:n.next=15;break;case 9:if(tt(s),Re(t.text),n.t1=e.onSelect,!n.t1){n.next=15;break}return n.next=15,e.onSelect(t.text);case 15:case"end":return n.stop()}}),n)}))),style:{position:"absolute",left:t.bbox.x0*(ot?te:Le)+(ot?0:(S.width-Le*(null!==(r=null===(c=ht.current)||void 0===c?void 0:c.offsetWidth)&&void 0!==r?r:0))/2),top:ot?(t.bbox.y0+((null!==(a=null===Y||void 0===Y?void 0:Y.height)&&void 0!==a?a:0)-(null!==(i=null===ae||void 0===ae?void 0:ae.height)&&void 0!==i?i:0))/2)*te:t.bbox.y0*Le,width:(t.bbox.x1-t.bbox.x0)*(ot?te:Le),height:(t.bbox.y1-t.bbox.y0)*(ot?te:Le),border:et===s?"1px solid green":"1px dashed red",backgroundColor:"transparent",color:"red",overflow:"visible"},children:[" ",Object(T.jsx)("div",{style:{position:"relative",overflow:"visible",height:"100%"},children:Object(T.jsx)("div",{style:{position:"absolute",width:"80%",bottom:"100%",color:"#fb4d3d",overflow:"hidden",fontSize:"10px",display:"block",whiteSpace:"nowrap"},children:t.text})})]},s):null})))]})}),!1===ot&&"recognize"===Ze&&Xe>0&&Xe<1&&Object(T.jsx)(d.a,{sx:{top:null!==(i=null===D||void 0===D?void 0:D.top)&&void 0!==i?i:0,left:0,bottom:(null!==(l=null===D||void 0===D?void 0:D.height)&&void 0!==l?l:0)+(null!==(v=null===D||void 0===D?void 0:D.top)&&void 0!==v?v:0),right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(T.jsxs)(d.a,{sx:{position:"relative",display:"inline-flex"},children:[Object(T.jsx)(h.a,{size:25,variant:"determinate",value:100*Xe}),Object(T.jsx)(d.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:Object(T.jsx)(j.a,{variant:"caption",component:"div",color:"text.secondary",fontSize:"20px",sx:{width:S.width},children:"".concat(Math.round(100*Xe),"%")})})]})}),Object(T.jsx)(p.a,{"aria-label":"add",size:"small",style:{position:"absolute",bottom:50,right:5},onClick:function(){Fe("camera"),de(void 0),Oe(void 0),Ie(void 0)},children:Object(T.jsx)(W.a,{})}),Object(T.jsx)(p.a,{"aria-label":"upload",size:"small",style:{position:"absolute",bottom:5,right:5},onClick:function(){se.current&&(se.current.click(),se.current.files=null)},children:Object(T.jsx)(R.a,{})}),Object(T.jsx)(p.a,{onClick:function(){Fe("crop"),Ie(void 0)},size:"small",style:{position:"absolute",bottom:95,right:5},children:Object(T.jsx)(I.a,{})}),Object(T.jsx)(p.a,{"aria-label":"Take Photo",size:"large",onClick:mt,style:{position:"absolute",bottom:5,left:S.width/2-28},children:Object(T.jsx)(m.a,{fontSize:"large"})}),Object(T.jsx)(O.a,{"aria-label":"Zoom In",onClick:function(){"recognize"===Ze?Be((function(e){return e+.1})):"crop"===Ze&&De((function(e){return e+.1}))},size:"large",style:{position:"absolute",bottom:0,right:S.width/2-100},children:Object(T.jsx)(y.a,{fontSize:"large",color:"info"})}),Object(T.jsx)(O.a,{"aria-label":"Zoom Out",onClick:function(){"recognize"===Ze?Be((function(e){return e-.1})):"crop"===Ze&&De((function(e){return e-.1}))},size:"large",style:{position:"absolute",bottom:0,left:S.width/2-100},children:Object(T.jsx)(z.a,{fontSize:"large",color:"info"})}),Object(T.jsx)(x.a,{sx:{position:"absolute",bottom:5,left:5,backgroundColor:"white",margin:0,borderRadius:"20px",fontSize:"8px"},color:"secondary",checked:ot,onChange:function(e,t){return ut(t)}}),Object(T.jsx)("input",{accept:"images/*, image/*",ref:se,type:"file",onChange:wt,onClick:function(e){e.target.value=""},hidden:!0})]})}var L=function(){var e=c.a.useState(null),t=Object(s.a)(e,2),n=(t[0],t[1],Object(r.useState)("")),a=Object(s.a)(n,2),i=a[0],b=a[1],f=Object(r.useState)("Serial Number:"),d=Object(s.a)(f,2),h=d[0],j=d[1],p=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data.lines.find((function(e){return e.text.startsWith(h)})))){e.next=4;break}return b(n.text),e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{style:{textAlign:"center"},children:[Object(T.jsx)(l.a,{sx:{width:"300px"},required:!0,id:"outlined-required",label:"Search in video",value:h,variant:"standard",helperText:"Result: ".concat(i),onChange:function(e){return j(e.target.value)}}),Object(T.jsx)(M,{onExamineResult:p,onSelect:O})]})};i.a.render(Object(T.jsx)(L,{}),document.querySelector("#root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.00f77e32.chunk.js.map